name: "Check PR branch name"
on:
  pull_request:
    types:
      - opened
      - reopened
      - edited
      - synchronize

jobs:
  branch-naming-rules:
    runs-on: ubuntu-latest
    steps:
      - name: check1
        continue-on-error: true
        uses: deepakputhraya/action-branch-name@master
        with:
          regex: '(LEV|LW)-[0-9]+-\S+'
          allowed_prefixes: 'feature,bugfix,hotfix'
          ignore: main,develop

      - name: check2
        continue-on-error: true
        uses: deepakputhraya/action-branch-name@master
        with:
          regex: 'v\.[0-9]+.[0-9]+.[0-9]+'
          allowed_prefixes: 'release'
          ignore: main,develop

      - name: test
        run: |
          echo ${{steps.check1.outcome == 'success'}}
          echo ${{steps.check2.outcome == 'success'}}
          echo ${{steps.check1.conclusion == 'success'}}
          echo ${{steps.check2.conclusion == 'success'}}

      - name: success
        if: steps.check1.outcome == 'success' || steps.check2.outcome == 'success'
        run: exit 0

      - name: success
        if: steps.check1.outcome != 'success' && steps.check2.outcome != 'success'
        run: exit 1
